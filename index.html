<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Lock Password Vault</title>
    <link href="https://fonts.googleapis.com/css2?family=Bai+Jamjuree:wght@600;700&family=Space+Grotesk:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <style>
        :root {
            --quantum-blue: #6d8cff;
            --quantum-purple: #9d4dff;
            --quantum-pink: #ff4d9d;
            --quantum-dark: #0a0a1a;
            --quantum-darker: #070712;
            --quantum-light: #f0f5ff;
            --quantum-gray: #a0a0c0;
            --quantum-teal: #4df0ff;
            --quantum-success: #00d1a7;
        }

        .light-mode {
            --quantum-darker: #f0f5ff;
            --quantum-dark: #e0e5ff;
            --quantum-light: #0a0a1a;
            --quantum-gray: #404060;
            --quantum-teal: #0088cc;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(109, 140, 255, 0.1) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(157, 77, 255, 0.1) 0%, transparent 25%),
                radial-gradient(circle at 40% 80%, rgba(255, 77, 157, 0.05) 0%, transparent 25%),
                linear-gradient(to bottom, var(--quantum-darker), #e0e5ff);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Space Grotesk', sans-serif;
            background-color: var(--quantum-darker);
            color: var(--quantum-light);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 0;
            position: relative;
            overflow-x: hidden;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(109, 140, 255, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 80% 70%, rgba(157, 77, 255, 0.15) 0%, transparent 25%),
                radial-gradient(circle at 40% 80%, rgba(255, 77, 157, 0.1) 0%, transparent 25%),
                linear-gradient(to bottom, var(--quantum-darker), #121230);
        }

        #particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .header {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(10, 10, 26, 0.9);
            backdrop-filter: blur(10px);
            z-index: 100;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(109, 140, 255, 0.2);
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-links a {
            color: var(--quantum-gray);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--quantum-blue);
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--quantum-gray);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 5px;
        }

        .theme-toggle:hover {
            color: var(--quantum-blue);
        }

        .scroll-container {
            height: 100vh;
            overflow-y: auto;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
        }

        section {
            min-height: 100vh;
            scroll-snap-align: start;
            padding: 80px 20px 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
        }

        .container {
            background: rgba(15, 15, 35, 0.85);
            backdrop-filter: blur(12px);
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5),
                        0 0 0 1px rgba(109, 140, 255, 0.1);
            padding: 40px;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            z-index: 1;
            border: 1px solid rgba(109, 140, 255, 0.15);
        }

        h1 {
            font-family: 'Bai Jamjuree', sans-serif;
            color: transparent;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 700;
            font-size: 2.5rem;
            background: linear-gradient(90deg, var(--quantum-blue), var(--quantum-purple));
            -webkit-background-clip: text;
            background-clip: text;
            position: relative;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 3px;
            background: linear-gradient(90deg, var(--quantum-blue), var(--quantum-purple));
            border-radius: 3px;
        }

        .password-display {
            font-size: 1.5rem;
            margin: 30px 0;
            padding: 20px;
            background: rgba(109, 140, 255, 0.08);
            border-radius: 12px;
            word-break: break-all;
            text-align: center;
            border: 1px solid rgba(109, 140, 255, 0.2);
            position: relative;
            min-height: 90px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-family: 'Courier New', monospace;
            color: var(--quantum-teal);
        }

        .password-display.empty::before {
            content: "Your quantum password will appear here";
            color: var(--quantum-gray);
            font-style: italic;
            font-family: 'Space Grotesk', sans-serif;
        }

        .controls {
            margin: 30px 0;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .controls::-webkit-scrollbar {
            width: 6px;
        }

        .controls::-webkit-scrollbar-track {
            background: rgba(109, 140, 255, 0.05);
            border-radius: 3px;
        }

        .controls::-webkit-scrollbar-thumb {
            background: var(--quantum-blue);
            border-radius: 3px;
        }

        .control-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 12px;
            color: var(--quantum-light);
            font-weight: 400;
            font-size: 1rem;
        }

        .input-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        input[type="range"] {
            width: 100%;
            margin-bottom: 15px;
            -webkit-appearance: none;
            height: 6px;
            background: rgba(109, 140, 255, 0.1);
            border-radius: 3px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            background: var(--quantum-blue);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(109, 140, 255, 0.5);
        }

        input[type="number"],
        input[type="text"],
        select,
        textarea {
            flex: 1;
            padding: 14px 18px;
            background: rgba(109, 140, 255, 0.08);
            border: 1px solid rgba(109, 140, 255, 0.2);
            border-radius: 10px;
            color: var(--quantum-light);
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s ease;
            resize: none;
        }
        /* ===== Dropdown Fixes ===== */
select {
  color: var(--quantum-light) !important;
  background-color: var(--quantum-dark);
  border: 1px solid rgba(109, 140, 255, 0.3);
}

.light-mode select {
  color: var(--quantum-darker) !important;
  background-color: var(--quantum-light);
  border-color: rgba(0, 0, 0, 0.2);
}

select option {
  color: var(--quantum-light);
  background-color: var(--quantum-dark);
}

.light-mode select option {
  color: var(--quantum-darker);
  background-color: var(--quantum-light);
}

select:focus {
  outline: none;
  box-shadow: 0 0 0 2px var(--quantum-blue);
}
        input[type="number"]:focus,
        input[type="text"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--quantum-blue);
            background: rgba(109, 140, 255, 0.15);
            box-shadow: 0 0 10px rgba(109, 140, 255, 0.2);
        }

        input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: rgba(109, 140, 255, 0.08);
            border: 1px solid rgba(109, 140, 255, 0.3);
            border-radius: 6px;
            margin-right: 12px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }

        input[type="checkbox"]:checked {
            background: var(--quantum-blue);
            border-color: var(--quantum-blue);
        }

        input[type="checkbox"]:checked::after {
            content: '\f00c';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--quantum-dark);
            font-size: 12px;
        }

        .btn {
            padding: 16px 25px;
            background: linear-gradient(135deg, var(--quantum-blue), var(--quantum-purple));
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s ease;
            width: 100%;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            box-shadow: 0 5px 20px rgba(109, 140, 255, 0.3);
            letter-spacing: 0.5px;
            font-family: 'Bai Jamjuree', sans-serif;
            text-transform: uppercase;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(109, 140, 255, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-copy {
            background: linear-gradient(135deg, var(--quantum-purple), #7d3dff);
            box-shadow: 0 5px 20px rgba(157, 77, 255, 0.3);
        }

        .btn-copy:hover {
            box-shadow: 0 8px 25px rgba(157, 77, 255, 0.4);
        }

        .btn-qr {
            background: linear-gradient(135deg, var(--quantum-pink), #ff2d7d);
            box-shadow: 0 5px 20px rgba(255, 77, 157, 0.3);
        }

        .btn-qr:hover {
            box-shadow: 0 8px 25px rgba(255, 77, 157, 0.4);
        }

        .btn-download {
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--quantum-teal), #00c497);
            box-shadow: 0 5px 20px rgba(77, 255, 240, 0.3);
        }

        .btn-download:hover {
            box-shadow: 0 8px 25px rgba(77, 255, 240, 0.4);
        }

        .btn-export, .btn-import, .btn-clear-history, .btn-clear-logs, .btn-history {
            padding: 12px 20px;
            font-size: 0.9rem;
        }

        .strength-meter {
            height: 8px;
            background: rgba(109, 140, 255, 0.1);
            margin: 20px 0;
            border-radius: 8px;
            overflow: hidden;
        }

        .strength-bar {
            height: 100%;
            width: 0%;
            transition: width 0.5s ease, background 0.3s ease;
        }

        .strength-weak {
            background: linear-gradient(90deg, var(--quantum-pink), #ff2d7d);
            width: 33%;
        }

        .strength-medium {
            background: linear-gradient(90deg, #ff7d4d, #ff6b3d);
            width: 66%;
        }

        .strength-strong {
            background: linear-gradient(90deg, var(--quantum-success), #00c497);
            width: 100%;
        }

        .strength-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
        }

        .strength-label {
            font-size: 1rem;
            color: var(--quantum-gray);
            font-weight: 500;
        }

        .strength-value {
            font-weight: 600;
            font-size: 1rem;
        }

        .weak {
            color: var(--quantum-pink);
        }

        .medium {
            color: #ff7d4d;
        }

        .strong {
            color: var(--quantum-success);
        }

        .strength-details {
            background: rgba(109, 140, 255, 0.08);
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 3px solid var(--quantum-blue);
        }

        .strength-details h4 {
            color: var(--quantum-teal);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .strength-details p {
            line-height: 1.6;
            font-size: 0.9rem;
        }

        .qr-container {
            background: rgba(109, 140, 255, 0.08);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(109, 140, 255, 0.2);
            margin-top: 20px;
            text-align: center;
            display: none;
        }

        .compliance-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .badge {
            background: rgba(109, 140, 255, 0.1);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .badge.valid {
            background: rgba(0, 209, 167, 0.1);
            color: var(--quantum-success);
        }

        .badge.invalid {
            background: rgba(255, 77, 157, 0.1);
            color: var(--quantum-pink);
        }

        .guidelines {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .guideline-card {
            background: rgba(109, 140, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid var(--quantum-blue);
            transition: transform 0.3s;
        }

        .guideline-card:hover {
            transform: translateY(-5px);
            background: rgba(109, 140, 255, 0.15);
        }

        .guideline-card h3 {
            color: var(--quantum-blue);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .faq-container {
            margin: 30px 0;
        }

        .faq-item {
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(109, 140, 255, 0.2);
            padding-bottom: 15px;
        }

        .faq-question {
            color: var(--quantum-teal);
            font-weight: 500;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-answer {
            margin-top: 10px;
            color: var(--quantum-gray);
            line-height: 1.6;
            display: none;
        }

        .faq-question i {
            transition: transform 0.3s;
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        .faq-item.active .faq-answer {
            display: block;
        }

        .enterprise-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .enterprise-card {
            background: rgba(109, 140, 255, 0.08);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(109, 140, 255, 0.2);
        }

        .enterprise-card h3 {
            color: var(--quantum-blue);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer {
            text-align: center;
            padding: 30px;
            color: var(--quantum-gray);
            font-size: 0.9rem;
            border-top: 1px solid rgba(109, 140, 255, 0.1);
        }

        .tooltip {
            position: relative;
            display: inline-block;
            margin-left: 10px;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--quantum-dark);
            color: var(--quantum-light);
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9rem;
            border: 1px solid var(--quantum-blue);
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .history-container, .audit-container {
            margin-top: 20px;
            background: rgba(109, 140, 255, 0.08);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid var(--quantum-blue);
        }

        .history-item, .audit-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid rgba(109, 140, 255, 0.2);
        }

        .history-item:last-child, .audit-item:last-child {
            border-bottom: none;
        }

        .history-password, .audit-details {
            font-family: 'Courier New', monospace;
            color: var(--quantum-teal);
            word-break: break-all;
            flex: 1;
        }

        .history-actions {
            display: flex;
            gap: 10px;
        }

        .btn-history, .btn-clear-history, .btn-clear-logs {
            padding: 8px 12px;
            background: linear-gradient(135deg, var(--quantum-blue), var(--quantum-purple));
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .btn-history:hover, .btn-clear-history:hover, .btn-clear-logs:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(109, 140, 255, 0.4);
        }

        .btn-clear-history, .btn-clear-logs {
            background: linear-gradient(135deg, var(--quantum-pink), #ff2d7d);
        }

        .chart-container {
            margin-top: 20px;
            max-width: 100%;
        }

        @media (max-width: 768px) {
            .container {
                padding: 30px;
            }

            h1 {
                font-size: 2rem;
            }

            .controls {
                max-height: 300px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .btn {
                padding: 14px 20px;
                font-size: 1rem;
            }

            .nav-links {
                display: none;
            }
        }
        .settings-buttons .btn {
  width: auto !important;
  flex: 1 1 auto;
  min-width: 150px;
}
/* Loading animation */
.loading-dots {
  display: inline-flex;
  gap: 4px;
}

.loading-dots span {
  animation: pulse 1.5s infinite ease-in-out;
  opacity: 0;
  font-weight: bold;
}

.loading-dots span:nth-child(2) { animation-delay: 0.2s; }
.loading-dots span:nth-child(3) { animation-delay: 0.4s; }

@keyframes pulse {
  0%, 100% { opacity: 0.2; transform: translateY(0); }
  50% { opacity: 1; transform: translateY(-3px); }
}
    </style>
</head>
<body>
    <canvas id="particle-bg"></canvas>
    <div class="header">
        <h2 style="
            font-family: 'Bai Jamjuree', sans-serif;
            background: linear-gradient(90deg, var(--quantum-blue), var(--quantum-purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        ">QUANTUM LOCK</h2>
        <div class="nav-links">
            <a href="#generator">Generator</a>
            <a href="#strength">Password Strength</a>
            <a href="#faqs">FAQs</a>
            <a href="#enterprise">For Teams</a>
            <a href="#audit">Audit Log</a>
        </div>
        <button class="theme-toggle" aria-label="Toggle theme" tabindex="0">
            <i class="fas fa-moon"></i>
        </button>
    </div>

    <div class="scroll-container">
        <!-- Generator Section -->
        <section id="generator">
            <div class="container">
                <h1>QUANTUM PASSWORD GENERATOR</h1>

                <div class="password-display empty" id="password" role="region" aria-live="polite"></div>

                <div class="qr-container" id="qr-container">
                    <canvas id="qr-code"></canvas>
                    <button class="btn btn-download" id="download-qr" tabindex="0">
                        <i class="fas fa-download"></i>
                        DOWNLOAD QR CODE
                    </button>
                </div>

                <div class="controls">
                    <div class="control-group">
                        <label for="policy">Password Policy:</label>
                        <select id="policy" aria-label="Select password policy">
                            <option value="personal">Personal (12 chars, mixed)</option>
                            <option value="enterprise">Enterprise (16 chars, all types)</option>
                            <option value="high-security">High-Security (20 chars, all types)</option>
                        </select>
                    </div>

                    <div class="control-group">
                        <label for="length">Password Length: <span id="length-value">12</span></label>
                        <input type="range" id="length" min="4" max="50" value="12" class="slider" aria-label="Password length">
                        <input type="number" id="length-input" min="4" max="50" value="12" aria-label="Password length input">
                    </div>

                    <div class="control-group">
                        <label for="words">Include Specific Words (separate by commas):</label>
                        <input type="text" id="words" placeholder="e.g., dragon, quantum, 2024" aria-label="Custom words">
                    </div>

                    <div class="control-group">
                        <label>
                            <div class="input-group">
                                <input type="checkbox" id="uppercase" checked aria-label="Include uppercase letters">
                                <span>Include Uppercase Letters (A-Z)</span>
                            </div>
                        </label>

                        <label>
                            <div class="input-group">
                                <input type="checkbox" id="digits" checked aria-label="Include numbers">
                                <span>Include Numbers (0-9)</span>
                            </div>
                        </label>

                        <label>
                            <div class="input-group">
                                <input type="checkbox" id="special" checked aria-label="Include special characters">
                                <span>Include Special Characters (!@#$% etc.)</span>
                                <div class="tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltiptext">Special characters significantly increase password strength</span>
                                </div>
                            </div>
                        </label>

                        <label>
                            <div class="input-group">
                                <input type="checkbox" id="avoid-ambiguous" checked aria-label="Avoid ambiguous characters">
                                <span>Avoid Ambiguous Characters (e.g., l, 1, O, 0)</span>
                                <div class="tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltiptext">Excludes characters that can be confused</span>
                                </div>
                            </div>
                        </label>

                        <label>
                            <div class="input-group">
                                <input type="checkbox" id="pronounceable" aria-label="Generate pronounceable password">
                                <span>Generate Pronounceable Password</span>
                                <div class="tooltip">
                                    <i class="fas fa-info-circle"></i>
                                    <span class="tooltiptext">Creates a password that is easier to pronounce</span>
                                </div>
                            </div>
                        </label>
                    </div>
                </div>

                <div class="strength-info">
                    <div class="strength-label">QUANTUM STRENGTH</div>
                    <div class="strength-value" id="strength-value">—</div>
                </div>
                <div class="strength-meter">
                    <div class="strength-bar" id="strength-bar"></div>
                </div>

                <div class="strength-details" id="strength-details" style="display: none;">
                    <h4><i class="fas fa-shield-alt"></i> Security Analysis</h4>
                    <p id="strength-feedback">Loading analysis...</p>
                    <div class="compliance-badges" id="compliance-badges"></div>
                    <div class="chart-container">
                        <canvas id="strength-chart"></canvas>
                    </div>
                </div>

                <button class="btn" id="generate" tabindex="0">
                    <i class="fas fa-lock"></i>
                    GENERATE QUANTUM KEY
                </button>
                <button class="btn btn-copy" id="copy" tabindex="0">
                    <i class="far fa-copy"></i>
                    COPY TO CLIPBOARD
                </button>
                <button class="btn btn-qr" id="qr-generate" tabindex="0">
                    <i class="fas fa-qrcode"></i>
                    GENERATE QR CODE
                </button>
                <div style="display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; margin-top: 10px;">
                   <div class="settings-buttons" style="display: flex; gap: 12px; flex-wrap: wrap; justify-content: center; margin-top: 10px;">
  <button class="btn btn-export" id="export-settings" tabindex="0">
    <i class="fas fa-download"></i>
    EXPORT SETTINGS
  </button>
  <label class="btn btn-import" style="display: flex; align-items: center; justify-content: center; cursor: pointer;">
    <i class="fas fa-upload"></i>
    IMPORT SETTINGS
    <input type="file" id="import-settings" accept=".json" style="display: none;" aria-label="Import settings">
  </label>
</div>

                </div>

                <div class="history-container" id="history" style="display: none;">
                    <h4><i class="fas fa-history"></i> Password History</h4>
                    <div id="history-list"></div>
                    <button class="btn btn-clear-history" id="clear-history" tabindex="0">
                        <i class="fas fa-trash"></i> Clear History
                    </button>
                </div>
            </div>
        </section>

        <!-- Password Strength Guidelines -->
        <section id="strength" style="background: rgba(109, 140, 255, 0.03);">
            <div class="container">
                <h1>WHAT MAKES A PASSWORD STRONG?</h1>

                <div class="guidelines">
                    <div class="guideline-card">
                        <h3><i class="fas fa-ruler"></i> Length Matters</h3>
                        <p>Quantum Lock enforces 12+ characters by default. Each additional character exponentially increases security against brute-force attacks.</p>
                    </div>

                    <div class="guideline-card">
                        <h3><i class="fas fa-random"></i> Complexity</h3>
                        <p>We mix uppercase, numbers, and special characters seamlessly with your memorable words to maximize entropy without sacrificing usability.</p>
                    </div>

                    <div class="guideline-card">
                        <h3><i class="fas fa-user-secret"></i> Unpredictability</h3>
                        <p>Our quantum-grade randomization ensures no patterns exist, even when using custom words, making dictionary attacks ineffective.</p>
                    </div>
                </div>

                <div style="margin-top: 40px; background: rgba(109, 140, 255, 0.08); padding: 20px; border-radius: 12px;">
                    <h3 style="color: var(--quantum-teal); margin-bottom: 15px;">How Quantum Lock Implements This:</h3>
                    <ul style="padding-left: 20px; line-height: 1.8;">
                        <li><strong>Dynamic Length Adjustment:</strong> Automatically scales complexity based on your chosen length.</li>
                        <li><strong>Smart Word Integration:</strong> Embeds your words between random characters to break predictability.</li>
                        <li><strong>Real-Time Entropy Analysis:</strong> The strength meter evaluates against modern cracking techniques.</li>
                        <li><strong>Customizable Options:</strong> Supports pronounceable passwords and avoids ambiguous characters for usability.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faqs">
            <div class="container">
                <h1>FREQUENTLY ASKED QUESTIONS</h1>

                <div class="faq-container">
                    <div class="faq-item">
                        <div class="faq-question" tabindex="0">
                            <span>Are my custom words stored anywhere?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>No. Quantum Lock runs entirely in your browser. Your words and generated passwords never leave your device, and history is stored locally using browser storage.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" tabindex="0">
                            <span>How often should I change my passwords?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>With Quantum Lock's strong generation, frequent changes aren't necessary unless a service is breached. Focus on creating <strong>unique</strong> passwords for each account.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" tabindex="0">
                            <span>Can I use this for my company's passwords?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Absolutely. See our <a href="#enterprise" style="color: var(--quantum-blue);">Enterprise Solutions</a> section for team management features.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" tabindex="0">
                            <span>Why not just use a password manager?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Quantum Lock complements password managers by generating stronger base passwords that you can then store in your preferred manager.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question" tabindex="0">
                            <span>Is sharing passwords via QR code secure?</span>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>QR codes are secure for sharing passwords between your own devices or with trusted individuals. However, you should only display the QR code in a secure environment and delete it after use.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Enterprise/Integration Section -->
        <section id="enterprise" style="background: rgba(109, 140, 255, 0.03);">
            <div class="container">
                <h1>ENTERPRISE SOLUTIONS</h1>
                <p style="margin-bottom: 30px; line-height: 1.6; text-align: center;">
                    Quantum Lock isn't just for individuals. Here's how teams and applications can leverage our technology:
                </p>

                <div class="enterprise-features">
                    <div class="enterprise-card">
                        <h3><i class="fas fa-users"></i> Team Password Vaults</h3>
                        <p>Our API allows companies to generate and store encrypted passwords in your existing infrastructure, with role-based access control.</p>
                    </div>

                    <div class="enterprise-card">
                        <h3><i class="fas fa-plug"></i> Application Integration</h3>
                        <p>Embed Quantum Lock directly into your apps via our JavaScript SDK for secure client-side password generation.</p>
                    </div>

                    <div class="enterprise-card">
                        <h3><i class="fas fa-shield-alt"></i> Security Audits</h3>
                        <p>We provide entropy reports for generated passwords to help meet compliance requirements (SOC2, HIPAA, etc.).</p>
                    </div>
                </div>

                <div style="margin-top: 40px; background: rgba(109, 140, 255, 0.08); padding: 20px; border-radius: 12px;">
                    <h3 style="color: var(--quantum-teal); margin-bottom: 15px;">Test API Integration:</h3>
                    <div class="control-group">
                        <label for="api-key">API Key:</label>
                        <input type="text" id="api-key" placeholder="Enter your API Key" aria-label="API key input">
                    </div>
                    <button class="btn" id="test-api" tabindex="0">
                        <i class="fas fa-plug"></i> Test API Call
                    </button>
                    <pre style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; overflow-x: auto; font-family: 'Courier New', monospace; color: var(--quantum-teal);">
                    // Sample API call for enterprise integration
                    fetch('https://api.quantumlock/generate', {
                        method: 'POST',
                        headers: { 
                            'Content-Type': 'application/json',
                            'Authorization': 'Bearer YOUR_API_KEY'
                        },
                        body: JSON.stringify({
                            length: 16,
                            words: ['company', 'secure'],
                            entropyRequirements: 'enterprise',
                            avoidAmbiguous: true,
                            pronounceable: false
                        })
                    })</pre>
                    <p style="margin-top: 15px; font-size: 0.9em; color: var(--quantum-gray);">
                        <i class="fas fa-lock"></i> All requests are end-to-end encrypted with quantum-resistant algorithms.
                    </p>
                </div>
            </div>
        </section>

        <!-- Audit Log Section -->
        <section id="audit" style="background: rgba(109, 140, 255, 0.03);">
            <div class="container">
                <h1>AUDIT LOG</h1>
                <p style="margin-bottom: 30px; line-height: 1.6; text-align: center;">
                    View a history of password generation actions for compliance and tracking.
                </p>
                <div class="audit-container" id="audit-log">
                    <h4><i class="fas fa-clipboard-list"></i> Audit Log</h4>
                    <div id="audit-list"></div>
                    <button class="btn btn-clear-logs" id="clear-logs" tabindex="0">
                        <i class="fas fa-trash"></i> Clear Audit Log
                    </button>
                </div>
            </div>
        </section>

        <div class="footer">
            <p>© 2023 Quantum Lock | Military-Grade Password Security</p>
            <p style="margin-top: 10px; font-size: 0.8rem; color: rgba(160, 160, 192, 0.6);">
                <i class="fas fa-code-branch"></i> v3.2.0 | <i class="fas fa-shield-alt"></i> PenTest Certified
            </p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const generateBtn = document.getElementById('generate');
            const copyBtn = document.getElementById('copy');
            const qrGenerateBtn = document.getElementById('qr-generate');
            const downloadQrBtn = document.getElementById('download-qr');
            const passwordDisplay = document.getElementById('password');
            const qrContainer = document.getElementById('qr-container');
            const qrCanvas = document.getElementById('qr-code');
            const lengthSlider = document.getElementById('length');
            const lengthInput = document.getElementById('length-input');
            const lengthValue = document.getElementById('length-value');
            const wordsInput = document.getElementById('words');
            const uppercaseCheckbox = document.getElementById('uppercase');
            const digitsCheckbox = document.getElementById('digits');
            const specialCheckbox = document.getElementById('special');
            const avoidAmbiguousCheckbox = document.getElementById('avoid-ambiguous');
            const pronounceableCheckbox = document.getElementById('pronounceable');
            const policySelect = document.getElementById('policy');
            const strengthBar = document.getElementById('strength-bar');
            const strengthValue = document.getElementById('strength-value');
            const strengthDetails = document.getElementById('strength-details');
            const strengthFeedback = document.getElementById('strength-feedback');
            const complianceBadges = document.getElementById('compliance-badges');
            const historyContainer = document.getElementById('history');
            const historyList = document.getElementById('history-list');
            const clearHistoryBtn = document.getElementById('clear-history');
            const exportSettingsBtn = document.getElementById('export-settings');
            const importSettingsInput = document.getElementById('import-settings');
            const themeToggle = document.querySelector('.theme-toggle');
            const apiKeyInput = document.getElementById('api-key');
            const testApiBtn = document.getElementById('test-api');
            const auditContainer = document.getElementById('audit-log');
            const auditList = document.getElementById('audit-list');
            const clearLogsBtn = document.getElementById('clear-logs');

            // Chart initialization
            let strengthChart = null;
            const chartCanvas = document.getElementById('strength-chart');
            const chartConfig = {
                type: 'bar',
                data: {
                    labels: ['Length', 'Variety', 'Entropy'],
                    datasets: [{
                        label: 'Password Strength',
                        data: [0, 0, 0],
                        backgroundColor: 'rgba(109, 140, 255, 0.5)',
                        borderColor: 'rgba(109, 140, 255, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 40,
                            title: {
                                display: true,
                                text: 'Score',
                                color: 'var(--quantum-light)'
                            },
                            ticks: {
                                color: 'var(--quantum-gray)'
                            }
                        },
                        x: {
                            ticks: {
                                color: 'var(--quantum-gray)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'var(--quantum-light)'
                            }
                        }
                    }
                }
            };

            // Password history and audit log
            let passwordHistory = JSON.parse(localStorage.getItem('quantumLockHistory')) || [];
            let auditLogs = JSON.parse(localStorage.getItem('quantumLockLogs')) || [];

            // Theme initialization
            if (localStorage.getItem('theme') === 'light') {
                document.body.classList.add('light-mode');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            }

            // Particle background
            const canvas = document.getElementById('particle-bg');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const particles = [];
            const particleCount = 200;

            class Particle {
                constructor() {
                    this.x = Math.random() * canvas.width;
                    this.y = Math.random() * canvas.height;
                    this.size = Math.random() * 2 + 1;
                    this.speedX = Math.random() * 0.5 - 0.25;
                    this.speedY = Math.random() * 0.5 - 0.25;
                    this.opacity = Math.random() * 0.5 + 0.1;
                }
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                    if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
                }
                draw() {
                    ctx.fillStyle = `rgba(109, 140, 255, ${this.opacity})`;
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fill();
                }
            }

            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }

            function animateParticles() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                particles.forEach(p => {
                    p.update();
                    p.draw();
                });
                requestAnimationFrame(animateParticles);
            }
            animateParticles();

            window.addEventListener('resize', () => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

            // Event listeners
            lengthSlider.addEventListener('input', function() {
                lengthInput.value = this.value;
                lengthValue.textContent = this.value;
            });

            lengthInput.addEventListener('input', function() {
                if (this.value > 50) this.value = 50;
                if (this.value < 4) this.value = 4;
                lengthSlider.value = this.value;
                lengthValue.textContent = this.value;
            });

            generateBtn.addEventListener('click', generatePassword);
            generateBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    generatePassword();
                }
            });

            copyBtn.addEventListener('click', copyToClipboard);
            copyBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    copyToClipboard();
                }
            });

            qrGenerateBtn.addEventListener('click', generateQRCode);
            qrGenerateBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    generateQRCode();
                }
            });

            downloadQrBtn.addEventListener('click', downloadQRCode);
            downloadQrBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    downloadQRCode();
                }
            });

            clearHistoryBtn.addEventListener('click', clearHistory);
            clearHistoryBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    clearHistory();
                }
            });

            exportSettingsBtn.addEventListener('click', exportSettings);
            exportSettingsBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    exportSettings();
                }
            });

            importSettingsInput.addEventListener('change', importSettings);

            themeToggle.addEventListener('click', toggleTheme);
            themeToggle.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleTheme();
                }
            });

            testApiBtn.addEventListener('click', simulateApiCall);
            testApiBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    simulateApiCall();
                }
            });

            clearLogsBtn.addEventListener('click', clearAuditLogs);
            clearLogsBtn.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    clearAuditLogs();
                }
            });

            policySelect.addEventListener('change', applyPolicy);

            document.querySelectorAll('.faq-question').forEach(question => {
                question.addEventListener('click', () => {
                    const item = question.parentElement;
                    item.classList.toggle('active');
                });
                question.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        const item = question.parentElement;
                        item.classList.toggle('active');
                    }
                });
            });

            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });

            // Initialize UI
            updateHistoryUI();
            updateAuditLogUI();
            applyPolicy();

            function applyPolicy() {
                const policy = policySelect.value;
                if (policy === 'personal') {
                    lengthInput.value = 12;
                    lengthSlider.value = 12;
                    lengthValue.textContent = 12;
                    uppercaseCheckbox.checked = true;
                    digitsCheckbox.checked = true;
                    specialCheckbox.checked = false;
                    avoidAmbiguousCheckbox.checked = true;
                    pronounceableCheckbox.checked = false;
                } else if (policy === 'enterprise') {
                    lengthInput.value = 16;
                    lengthSlider.value = 16;
                    lengthValue.textContent = 16;
                    uppercaseCheckbox.checked = true;
                    digitsCheckbox.checked = true;
                    specialCheckbox.checked = true;
                    avoidAmbiguousCheckbox.checked = true;
                    pronounceableCheckbox.checked = false;
                } else if (policy === 'high-security') {
                    lengthInput.value = 20;
                    lengthSlider.value = 20;
                    lengthValue.textContent = 20;
                    uppercaseCheckbox.checked = true;
                    digitsCheckbox.checked = true;
                    specialCheckbox.checked = true;
                    avoidAmbiguousCheckbox.checked = true;
                    pronounceableCheckbox.checked = false;
                }
            }

            function generatePassword() {
    // Show loading animation
    passwordDisplay.innerHTML = '<span class="loading-dots"><span>.</span><span>.</span><span>.</span></span>';
    passwordDisplay.classList.remove('empty');

    // Delay generation for animation effect
    setTimeout(() => {
        const length = parseInt(lengthInput.value);
        const words = wordsInput.value.split(',').map(word => word.trim()).filter(word => word.length > 0);
        const useUppercase = uppercaseCheckbox.checked;
        const useDigits = digitsCheckbox.checked;
        const useSpecial = specialCheckbox.checked;
        const avoidAmbiguous = avoidAmbiguousCheckbox.checked;
        const pronounceable = pronounceableCheckbox.checked;

        if (length < 4 || length > 50) {
            alert('Password length must be between 4 and 50 characters');
            passwordDisplay.textContent = '';
            passwordDisplay.classList.add('empty');
            return;
        }

        if (!useUppercase && !useDigits && !useSpecial && words.length === 0 && !pronounceable) {
            alert('Please select at least one character type, add words, or enable pronounceable password');
            passwordDisplay.textContent = '';
            passwordDisplay.classList.add('empty');
            return;
        }

        let password = '';

        if (pronounceable) {
            password = generatePronounceablePassword(length, useUppercase, useDigits, useSpecial, avoidAmbiguous);
        } else {
            if (words.length > 0) {
                const wordsLength = words.reduce((sum, word) => sum + word.length, 0);
                if (wordsLength >= length) {
                    password = words.join('');
                    password = password.substring(0, length);
                } else {
                    const separator = useSpecial ? getRandomSeparator(true) : getRandomSeparator(false);
                    password = words.join(separator);
                    const remainingLength = length - password.length;
                    if (remainingLength > 0) {
                        let characters = 'abcdefghijklmnopqrstuvwxyz';
                        if (useUppercase) characters += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                        if (useDigits) characters += '0123456789';
                        if (useSpecial) characters += '!@#$%^&*()_+-=[]{}|;:,.<>?';
                        if (avoidAmbiguous) {
                            characters = characters.replace(/[l1I0O]/g, '');
                        }
                        let randomPart = '';
                        for (let i = 0; i < remainingLength; i++) {
                            randomPart += characters.charAt(getRandomInt(characters.length));
                        }
                        const insertPosition = getRandomInt(password.length + 1);
                        password = password.slice(0, insertPosition) + randomPart + password.slice(insertPosition);
                    }
                }
            } else {
                let characters = 'abcdefghijklmnopqrstuvwxyz';
                if (useUppercase) characters += 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                if (useDigits) characters += '0123456789';
                if (useSpecial) characters += '!@#$%^&*()_+-=[]{}|;:,.<>?';
                if (avoidAmbiguous) {
                    characters = characters.replace(/[l1I0O]/g, '');
                }
                for (let i = 0; i < length; i++) {
                    password += characters.charAt(getRandomInt(characters.length));
                }
            }
        }

        password = ensureCharacterTypes(password, useUppercase, useDigits, useSpecial, avoidAmbiguous);
        passwordDisplay.textContent = password;
        qrContainer.style.display = 'none';
        updateStrengthMeter(password);
        addToHistory(password);
        logAction('generate', { length, words, useUppercase, useDigits, useSpecial, avoidAmbiguous, pronounceable });
        
        // Update button state
        generateBtn.innerHTML = '<i class="fas fa-check"></i> GENERATED!';
        setTimeout(() => {
            generateBtn.innerHTML = '<i class="fas fa-lock"></i> GENERATE QUANTUM KEY';
        }, 2000);
    }, 800); // 0.8s delay for animation
}
            function generatePronounceablePassword(length, useUppercase, useDigits, useSpecial, avoidAmbiguous) {
                const vowels = avoidAmbiguous ? 'aeiouy' : 'aeiouy';
                const consonants = avoidAmbiguous ? 'bcdfghjkmnpqrstvwxz' : 'bcdfghjklmnpqrstvwxyz';
                let password = '';
                let useVowel = getRandomInt(2) === 0;

                while (password.length < length) {
                    if (useVowel) {
                        password += vowels.charAt(getRandomInt(vowels.length));
                    } else {
                        password += consonants.charAt(getRandomInt(consonants.length));
                    }
                    useVowel = !useVowel;
                }

                password = password.substring(0, length);

                if (useUppercase || useDigits || useSpecial) {
                    password = ensureCharacterTypes(password, useUppercase, useDigits, useSpecial, avoidAmbiguous);
                }

                return password;
            }

            function ensureCharacterTypes(password, useUppercase, useDigits, useSpecial, avoidAmbiguous) {
                let result = password.split('');
                const length = result.length;
                let uppercaseChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                let digitChars = '0123456789';
                let specialChars = '!@#$%^&*()_+-=[]{}|;:,.<>?';

                if (avoidAmbiguous) {
                    uppercaseChars = uppercaseChars.replace(/[IO]/g, '');
                    digitChars = digitChars.replace(/[01]/g, '');
                }

                if (useUppercase && !/[A-Z]/.test(password)) {
                    const index = getRandomInt(length);
                    result[index] = uppercaseChars.charAt(getRandomInt(uppercaseChars.length));
                }
                if (useDigits && !/\d/.test(password)) {
                    const index = getRandomInt(length);
                    result[index] = digitChars.charAt(getRandomInt(digitChars.length));
                }
                if (useSpecial && !/[^a-zA-Z0-9]/.test(password)) {
                    const index = getRandomInt(length);
                    result[index] = specialChars.charAt(getRandomInt(specialChars.length));
                }

                return result.join('');
            }

            function getRandomSeparator(useSpecial) {
                const basicSeparators = ['-', '_', '.'];
                const specialSeparators = ['!', '@', '#', '$', '%', '^', '&', '*', '+', '='];
                const separators = useSpecial ? [...basicSeparators, ...specialSeparators] : basicSeparators;
                return separators[getRandomInt(separators.length)];
            }

            function shuffleString(str) {
                const array = str.split('');
                for (let i = array.length - 1; i > 0; i--) {
                    const j = getRandomInt(i + 1);
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array.join('');
            }

            function getRandomInt(max) {
                const array = new Uint32Array(1);
                crypto.getRandomValues(array);
                return array[0] % max;
            }

            function copyToClipboard() {
                const password = passwordDisplay.textContent;

                if (!password || passwordDisplay.classList.contains('empty')) {
                    alert('Please generate a password first');
                    return;
                }

                navigator.clipboard.writeText(password)
                    .then(() => {
                        copyBtn.innerHTML = '<i class="fas fa-check"></i> COPIED!';
                        setTimeout(() => {
                            copyBtn.innerHTML = '<i class="far fa-copy"></i> COPY TO CLIPBOARD';
                        }, 2000);
                        logAction('copy', { password });
                    })
                    .catch(err => {
                        console.error('Could not copy text: ', err);
                        alert('Failed to copy password. Please try again.');
                    });
            }

            function generateQRCode() {
  const password = passwordDisplay.textContent;

  if (!password || passwordDisplay.classList.contains('empty')) {
    alert('Please generate a password first');
    return;
  }

  try {
    QRCode.toCanvas(qrCanvas, password, {
      width: 220,
      margin: 2,
      color: {
        dark: '#000000',   // black squares
        light: '#ffffff'   // white background (ensures scanability)
      },
      errorCorrectionLevel: 'H'
    }, (error) => {
      if (error) {
        console.error('QR code generation error:', error);
        alert('Failed to generate QR code. Please try again.');
        return;
      }
      qrContainer.style.border = document.body.classList.contains('light-mode')
        ? '1px solid #e0e5ff'
        : '1px solid rgba(109, 140, 255, 0.3)';
      qrContainer.style.backgroundColor = 'white';
      qrContainer.style.display = 'block';
      logAction('generate_qr', { password });
    });
  } catch (error) {
    console.error('QR code generation error:', error);
    alert('Failed to generate QR code. Please try again.');
  }
}

            function downloadQRCode() {
                const password = passwordDisplay.textContent;
                if (!password || !qrContainer.style.display || qrContainer.style.display === 'none') {
                    alert('Please generate a QR code first');
                    return;
                }

                const link = document.createElement('a');
                link.download = `quantum-lock-password-${new Date().toISOString().slice(0, 10)}.png`;
                link.href = qrCanvas.toDataURL('image/png');
                link.click();
                logAction('download_qr', { password });
            }

            function updateStrengthMeter(password) {
                if (!password) {
                    strengthDetails.style.display = 'none';
                    strengthBar.className = 'strength-bar';
                    strengthValue.textContent = '—';
                    strengthValue.className = 'strength-value';
                    if (strengthChart) strengthChart.destroy();
                    return;
                }

                let strength = 0;
                let feedback = [];
                let crackTime = '';
                let strengthLabel = '';
                let lengthScore = 0;
                let varietyScore = 0;
                let entropyScore = 0;

                // Length score
                lengthScore = Math.min(password.length / 50 * 40, 40);
                strength += lengthScore;
                if (password.length < 12) {
                    feedback.push('Consider increasing length to 12+ characters for better security.');
                }

                // Variety score
                const hasLower = /[a-z]/.test(password);
                const hasUpper = /[A-Z]/.test(password);
                const hasDigit = /\d/.test(password);
                const hasSpecial = /[^a-zA-Z0-9]/.test(password);

                const variety = [hasLower, hasUpper, hasDigit, hasSpecial].filter(Boolean).length;
                varietyScore = (variety / 4) * 30;
                strength += varietyScore;
                if (variety < 3) {
                    feedback.push('Add more character types (uppercase, numbers, special) for higher entropy.');
                }

                // Entropy score
                const uniqueChars = new Set(password).size;
                entropyScore = (uniqueChars / password.length) * 30;
                strength += entropyScore;

                // Crack time
                const charsetSize = (hasLower ? 26 : 0) + (hasUpper ? 26 : 0) + (hasDigit ? 10 : 0) + (hasSpecial ? 32 : 0);
                const entropyBits = Math.log2(Math.pow(charsetSize, password.length));

                if (entropyBits < 40) {
                    crackTime = 'Instantly (less than 1 second)';
                    strengthLabel = 'Weak';
                    strengthBar.className = 'strength-bar strength-weak';
                    strengthValue.className = 'strength-value weak';
                } else if (entropyBits < 60) {
                    crackTime = 'Minutes to hours';
                    strengthLabel = 'Medium';
                    strengthBar.className = 'strength-bar strength-medium';
                    strengthValue.className = 'strength-value medium';
                } else {
                    crackTime = 'Years to centuries';
                    strengthLabel = 'Strong';
                    strengthBar.className = 'strength-bar strength-strong';
                    strengthValue.className = 'strength-value strong';
                }

                // Compliance checks
                const compliance = [
                    { name: 'NIST', valid: password.length >= 8 && variety >= 3 },
                    { name: 'OWASP', valid: password.length >= 12 && hasSpecial },
                    { name: 'PCI-DSS', valid: password.length >= 7 && hasUpper && hasDigit },
                    { name: 'HIPAA', valid: password.length >= 8 && variety >= 3 }
                ];

                strengthValue.textContent = strengthLabel;
                strengthDetails.style.display = 'block';

                strengthFeedback.innerHTML = `
                    <strong>Estimated Crack Time:</strong> ${crackTime}<br>
                    <strong>Entropy:</strong> ${Math.round(entropyBits)} bits<br>
                    ${feedback.length > 0 ? '<strong>Recommendations:</strong><ul>' + feedback.map(f => `<li>${f}</li>`).join('') + '</ul>' : 'This password is highly secure!'}
                `;

                complianceBadges.innerHTML = compliance.map(c => `
                    <span class="badge ${c.valid ? 'valid' : 'invalid'}">
                        <i class="fas ${c.valid ? 'fa-check' : 'fa-times'}"></i>
                        ${c.name}
                    </span>
                `).join('');

                // Update chart
                if (strengthChart) strengthChart.destroy();
                chartConfig.data.datasets[0].data = [lengthScore, varietyScore, entropyScore];
                strengthChart = new Chart(chartCanvas, chartConfig);
            }

            function addToHistory(password) {
                passwordHistory.unshift({
                    password: password,
                    timestamp: new Date().toLocaleString()
                });

                if (passwordHistory.length > 10) {
                    passwordHistory.pop();
                }

                localStorage.setItem('quantumLockHistory', JSON.stringify(passwordHistory));
                updateHistoryUI();
            }

            function updateHistoryUI() {
                if (passwordHistory.length === 0) {
                    historyContainer.style.display = 'none';
                    return;
                }

                historyContainer.style.display = 'block';
                historyList.innerHTML = passwordHistory.map((entry, index) => `
                    <div class="history-item">
                        <span class="history-password">${entry.password}</span>
                        <div class="history-actions">
                            <button class="btn-history" onclick="copyHistoryPassword(${index})" tabindex="0">
                                <i class="far fa-copy"></i> Copy
                            </button>
                            <button class="btn-history btn-clear-history" onclick="removeHistoryItem(${index})" tabindex="0">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            function copyHistoryPassword(index) {
                const password = passwordHistory[index].password;
                navigator.clipboard.writeText(password)
                    .then(() => {
                        alert('Password copied to clipboard!');
                        logAction('copy_history', { password });
                    })
                    .catch(err => {
                        console.error('Could not copy text: ', err);
                        alert('Failed to copy password. Please try again.');
                    });
            }

            function removeHistoryItem(index) {
                passwordHistory.splice(index, 1);
                localStorage.setItem('quantumLockHistory', JSON.stringify(passwordHistory));
                updateHistoryUI();
                logAction('remove_history', { index });
            }

            function clearHistory() {
                passwordHistory = [];
                localStorage.removeItem('quantumLockHistory');
                updateHistoryUI();
                logAction('clear_history', {});
            }

            function exportSettings() {
                const settings = {
                    length: lengthInput.value,
                    words: wordsInput.value,
                    uppercase: uppercaseCheckbox.checked,
                    digits: digitsCheckbox.checked,
                    special: specialCheckbox.checked,
                    avoidAmbiguous: avoidAmbiguousCheckbox.checked,
                    pronounceable: pronounceableCheckbox.checked,
                    policy: policySelect.value
                };
                const blob = new Blob([JSON.stringify(settings, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'quantum-lock-settings.json';
                a.click();
                URL.revokeObjectURL(url);
                logAction('export_settings', settings);
            }

            function importSettings(event) {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const settings = JSON.parse(e.target.result);
                        if (settings.length >= 4 && settings.length <= 50) {
                            lengthInput.value = settings.length;
                            lengthSlider.value = settings.length;
                            lengthValue.textContent = settings.length;
                        }
                        wordsInput.value = settings.words || '';
                        uppercaseCheckbox.checked = settings.uppercase || false;
                        digitsCheckbox.checked = settings.digits || false;
                        specialCheckbox.checked = settings.special || false;
                        avoidAmbiguousCheckbox.checked = settings.avoidAmbiguous || false;
                        pronounceableCheckbox.checked = settings.pronounceable || false;
                        policySelect.value = settings.policy || 'personal';
                        alert('Settings imported successfully!');
                        logAction('import_settings', settings);
                    } catch (err) {
                        alert('Invalid settings file. Please try again.');
                        console.error('Import error:', err);
                    }
                };
                reader.readAsText(file);
                event.target.value = ''; // Reset file input
            }

            function toggleTheme() {
                document.body.classList.toggle('light-mode');
                const isLight = document.body.classList.contains('light-mode');
                themeToggle.innerHTML = isLight ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
                localStorage.setItem('theme', isLight ? 'light' : 'dark');
                logAction('toggle_theme', { theme: isLight ? 'light' : 'dark' });
            }

            function simulateApiCall() {
                const apiKey = apiKeyInput.value;
                if (!apiKey) {
                    alert('Please enter an API key');
                    return;
                }

                const config = {
                    length: parseInt(lengthInput.value),
                    words: wordsInput.value.split(',').map(word => word.trim()).filter(word => word.length > 0),
                    uppercase: uppercaseCheckbox.checked,
                    digits: digitsCheckbox.checked,
                    special: specialCheckbox.checked,
                    avoidAmbiguous: avoidAmbiguousCheckbox.checked,
                    pronounceable: pronounceableCheckbox.checked
                };

                console.log('Simulated API call:', { apiKey, ...config });
                alert('API call simulated successfully! Check console for details.');
                logAction('simulate_api', { apiKey, config });
            }

            function logAction(action, details) {
                auditLogs.unshift({
                    action,
                    details,
                    timestamp: new Date().toLocaleString()
                });

                if (auditLogs.length > 50) {
                    auditLogs.pop();
                }

                localStorage.setItem('quantumLockLogs', JSON.stringify(auditLogs));
                updateAuditLogUI();
            }

            function updateAuditLogUI() {
                if (auditLogs.length === 0) {
                    auditContainer.style.display = 'none';
                    return;
                }

                auditContainer.style.display = 'block';
                auditList.innerHTML = auditLogs.map(log => `
                    <div class="audit-item">
                        <span class="audit-details">${log.timestamp} - ${log.action}: ${JSON.stringify(log.details, null, 2)}</span>
                    </div>
                `).join('');
            }

            function clearAuditLogs() {
                auditLogs = [];
                localStorage.removeItem('quantumLockLogs');
                updateAuditLogUI();
                logAction('clear_logs', {});
            }

            window.copyHistoryPassword = copyHistoryPassword;
            window.removeHistoryItem = removeHistoryItem;
        });
    </script>
</body>
</html>